<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
   <!-- {{!-- font font-awesome --}} -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<!--Google Fonts-->
 <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Aboreto&family=Oleo+Script+Swash+Caps:wght@400;700&family=Roboto+Mono:wght@300;400;500;600;700&family=Source+Code+Pro:wght@400;600;700;800&display=swap" rel="stylesheet">
  <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
<link rel="stylesheet" href="/stylesheets/users/productPage.css">
 <link rel="stylesheet" href="/stylesheets/home1.css">
    <link rel="stylesheet" href="/stylesheets/users/header.css">
    <title>Document</title>
</head>
<style>
   
</style>

<body>
  <!-- The Start of the Great Nav Section -->
  
   <div class="header">
      <p class="header__logo">Shoe Store</p>
      <form class="header__search" action="">
          <div class="header__search">
        <input class="header__searchInput" type="text" />
        <div class="header__searchIcon">
            <svg style="margin-top:-15px ;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-binoculars-fill" viewBox="0 0 16 16">
  <path d="M4.5 1A1.5 1.5 0 0 0 3 2.5V3h4v-.5A1.5 1.5 0 0 0 5.5 1h-1zM7 4v1h2V4h4v.882a.5.5 0 0 0 .276.447l.895.447A1.5 1.5 0 0 1 15 7.118V13H9v-1.5a.5.5 0 0 1 .146-.354l.854-.853V9.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v.793l.854.853A.5.5 0 0 1 7 11.5V13H1V7.118a1.5 1.5 0 0 1 .83-1.342l.894-.447A.5.5 0 0 0 3 4.882V4h4zM1 14v.5A1.5 1.5 0 0 0 2.5 16h3A1.5 1.5 0 0 0 7 14.5V14H1zm8 0v.5a1.5 1.5 0 0 0 1.5 1.5h3a1.5 1.5 0 0 0 1.5-1.5V14H9zm4-11H9v-.5A1.5 1.5 0 0 1 10.5 1h1A1.5 1.5 0 0 1 13 2.5V3z"/>
</svg>
      </form>
        </div>
      </div>
 <div class="header__nav">
 {{#if token}} 
        <div class="header__option">
            <span
            class="header__optionLineOne"
            >Hello {{username.name}}</span>
            <!-- The signup link condition Begining -->

         <a class="anchor__links" href="/users/logout"><span
            class="header__optionLineTwo"
            >logout</span>
            </a>
 {{else}} 

             <a class="anchor__links" href="/users/login"><span
            class="header__optionLineTwo"
            >Sign in</span>
            </a>
 {{/if}}
            <!-- The signup link condition End -->
        </div>
        <div class="header__option">
        <span
            class="header__optionLineOne"
            >Returns </span>
             <span
            class="header__optionLineTwo"
            >& orders</span>
        </div>
        <div class="header__option">
        <span
            class="header__optionLineOne"
            >Your</span>
             <span
            class="header__optionLineTwo"
            >Prime</span>
        </div>
        <div class="header__optionBasket">
            <ShoppingBasketIcon />
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-cart4" viewBox="0 0 16 16">
               <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l.5 2H5V5H3.14zM6 5v2h2V5H6zm3 0v2h2V5H9zm3 0v2h1.36l.5-2H12zm1.11 3H12v2h.61l.5-2zM11 8H9v2h2V8zM8 8H6v2h2V8zM5 8H3.89l.5 2H5V8zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"/>
            </svg>
            <span class="header__optionaLineTwo 
            header__basketCount">0</span>
        </div>
      </div>
    </div>
    <!-- Product Page     -->
<section class=" container sproduct  pt-4 ">
    <div class="row mt-5 parent__of__magnifier">
        <div class="col-12 col-md-12 col-lg-5 image__box " >
            <img class="img-fluid w-100 img" src="/product-images/{{data._id}}.jpg" alt="image__here">
            <div class="magnifier-lens"></div>
        </div>
        <div class="col-12 col-md-12 col-lg-6">
            <h6>Shoe Store</h6>
            <h3>{{data.company__name}} {{data.model}}</h3>
            <h2>Rs.{{data.price}}</h2>
            <select class="my-3" name="" id="">
                <option value="">Select Size</option>
                <option value="">6</option>
                <option value="">7</option>
                <option value="">8</option>
                <option value="">9</option>
                <option value="">10</option>
            </select>
            <input type="number"name="" value="1" id="">
            <button class="btn btn-success">Buy Now</button>
            <button class="btn btn-light add__to__cart">Add to Cart</button>
            <h4>Product details</h4>
            <p></p>{{data.description}}
            <div class="reviews">
                <div class="box">
                    <h2>Product Reviews</h2>
                    <div class="content">
                        
                        <div class="profile__pic">
                            <img src="" alt="profile__image" width="50px">
                            
                        </div>
                        <div class="comment">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Obcaecati, dignissimos?</div>
                    </div>
                </div> 
            </div>
        </div>
        <div class="magnified__image"></div>
    </div>
</section>

<script>
    const lens = document.querySelector('.magnifier-lens')
    const product__image= document.querySelector('.img')
    const magnified__image = document.querySelector('.magnified__image')
    const image__box = document.querySelector('.image__box')

    function magnify(product__image,magnified__image){
        lens.addEventListener('mousemove',moveLens)
        lens.addEventListener('mouseout',leaveLens)
        product__image.addEventListener('mousemove',moveLens)
        image__box.addEventListener('mouseout',leaveLens)
        //when mouse is taken out of the image
       
    }

    function moveLens(e){
        console.log("x :" +e.pageX+ "Y :" + e.pageY) 
        let x,y,cx,cy;
        //get the position of the cursor
        const product__image__rect = product__image.getBoundingClientRect();
        x = e.pageX - product__image__rect.left - lens.offsetWidth/2;
        y = e.pageY - product__image__rect.top - lens.offsetHeight/2;

        let max_xpos = product__image__rect.width -lens.offsetWidth
        let max_ypos = product__image__rect.height -lens.offsetHeight

        if(x > max_xpos) x = max_xpos
        if(x < 0) x = 0
        if(y > max_ypos) y = max_ypos
        if(y < 0 ) y = 0
        lens.style.cssText = `top:${y}px; left:${x}px`

        // calculate the magnified __img and lens's aspect ratio
        cx = magnified__image.offsetWidth / lens.offsetWidth
        cy = magnified__image.offsetHeight / lens.offsetHeight
        magnified__image.style.backgroundRepeat = `no-repeat`
        magnified__image.style.cssText = `background: url('${product__image.src}')
                    -${x * cx}px -${y * cy}px /
                    ${product__image__rect.width * cx}px ${product__image__rect.height * cy}px                         
        `;
        lens.classList.add('active')
        magnified__image.classList.add('active')
        // lens.classList.remove('active')
        
    }
    function leaveLens(){
            lens.classList.remove('active')  
            magnified__image.classList.remove('active')
        }
    magnify(product__image,magnified__image);
</script>

</body>
</html>